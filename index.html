<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Form Patroli UT</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        margin: 0;
        padding: 0;
    }
    header {
        background: #FFD600;
        color: black;
        padding: 15px;
        text-align: center;
        border-bottom: 5px solid black;
    }
    header img {
        max-height: 70px;
        display: block;
        margin: 0 auto 5px;
    }
    .form-container {
        max-width: 800px;
        margin: 20px auto;
        background: white;
        padding: 20px 30px;
        border-radius: 10px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }
    h2 {
        color: #000;
        text-align: center;
        margin-bottom: 20px;
    }
    label {
        font-weight: bold;
        display: block;
        margin-top: 15px;
    }
    select, input, textarea {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        border-radius: 5px;
        border: 1px solid #ccc;
    }
    button {
        background: black;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 5px;
        margin-top: 20px;
        cursor: pointer;
        font-size: 16px;
    }
    button:hover {
        background: #333;
    }
</style>
</head>
<body>

<header>
    <img src="UT member of ASTRA vertical.png" alt="United Tractors">
    <h1>Form Patroli</h1>
</header>

<div class="form-container">
    <form id="patroliForm" enctype="multipart/form-data" method="POST">

        <label>Nama:</label>
        <input type="text" name="nama" required>

        <label>Cabang:</label>
        <select name="cabang" required>
            <option value="Head Office">Head Office</option>
        </select>

        <label>Wilayah:</label>
        <select name="wilayah" id="wilayah" required>
            <option value="">-- Pilih Wilayah --</option>
            <option value="Wilayah 1">Wilayah 1</option>
            <option value="Wilayah 1B">Wilayah 1B</option>
            <option value="Wing">Wing</option>
            <option value="UTHO Tower">UTHO Tower</option>
            <option value="Wilayah 2">Wilayah 2</option>
            <option value="Wilayah 3">Wilayah 3</option>
        </select>

        <label>Checkpoint:</label>
        <select name="checkpoint" id="checkpoint" required>
            <option value="">-- Pilih Checkpoint --</option>
        </select>

        <label>Kejadian:</label>
        <select name="kejadian" id="kejadian" required>
            <option value="">-- Pilih Kejadian --</option>
            <option value="Kejadian 1">Kondisi Pintu, jendela rusak, terbuka / belum terkunci</option>
            <option value="Kejadian 2">Lampu padam , rusak / hilang</option>
            <option value="Kejadian 3">Pagar, Kawat duri rusak</option>
            <option value="Kejadian 4">Pipa air bersih / hidran / limbah bocor</option>
            <option value="Kejadian 5">Kunci gembok rusak atau hilang</option>
            <option value="Kejadian 6">Komponen unit rusak / hilang</option>
            <option value="Kejadian 7">Kondisi Hujan</option>
            <option value="Kejadian 8">Hubungan pendek listrik</option>
            <option value="Kejadian 9">Kebocoran air di ruangan</option>
            <option value="Kejadian 10">Situasi aman terkendali</option>
        </select>

        <label>Kategori Lokasi:</label>
        <select name="kategori" id="kategori">
            <option value="">-- Pilih Kategori Lokasi --</option>
            <option value="Bangunan">Bangunan</option>
            <option value="Fasilitas Tamu dan Karyawan">Fasilitas Tamu dan Karyawan</option>
            <option value="Ruang Terbuka">Ruang Terbuka</option>
            <option value="Alat Kerja">Alat Kerja</option>
            <option value="Pendukung Kerja">Pendukung Kerja</option>
            <option value="K3LH & Security">K3LH & Security</option>
            <option value="Lainnya">Kategori Lokasi Lainnya</option>
        </select>

        <label>Upload Foto:</label>
        <input type="file" name="foto" accept="image/*">

        <button type="submit">Kirim</button>
    </form>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxUCE4TPQtbKsRABXV-nWt-C4dYmLddU8pbXbltLUgM2egyuRO8eyZ56Jtx00ejI0A/exec"; // Ganti dengan URL Web App kamu

// Daftar checkpoint per wilayah
const checkpointData = {
    "Wilayah 1": [
        "1.1B.1 Pohon pelangi tanggul pertengahan Posko dan Aviari",
        "1.1B.2 Pohon Soga Pojok Timur depan UT",
        "1.1B.3 Pohon Trembesi Timur Gardu PGL 28",
        "1.1B.4 Pintu Darurat Wing Bagian Selatan",
        "1.1B.5 Pintu Luar Genset gedung Wing"
    ],
    "Wilayah 1B": [
        "1.1.1 Blower AC Bank Permata",
        "1.1.2 Sebelah Barat Pos 4B",
        "1.1.3 P3 Box Hydrant Barat",
        "1.1.4 Area Loading",
        "1.1.5 Area Exibition"
    ],
    "Wing": [
        "1.4B.1 Area parkir motor Lt.2",
        "1.4B.2 Parkiran P Tiang sisi Utara",
        "1.4B.3 P1 Tiang sisi utara"
    ],
    "UTHO Tower": [
        "1.3.1 Tangga darurat Lt. 3A Utara",
        "1.3.2 Area Lift Barang Lt. 6",
        "1.3.3 Tangga darurat Lt. 9 Utara"
    ],
    "Wilayah 2": [
        "2.8.1 Pohon jati dekat menara masjid",
        "2.8.2 Tembok pintu gerbang tanggul"
    ],
    "Wilayah 3": [
        "3.14.1 Tiang Workshop TTD",
        "3.14.2 Tembok luar ruang pompa Hydrant"
    ]
};

document.getElementById("wilayah").addEventListener("change", function() {
    let wilayah = this.value;
    let checkpointSelect = document.getElementById("checkpoint");
    checkpointSelect.innerHTML = '<option value="">-- Pilih Checkpoint --</option>';
    if (checkpointData[wilayah]) {
        checkpointData[wilayah].forEach(cp => {
            let opt = document.createElement("option");
            opt.value = cp;
            opt.textContent = cp;
            checkpointSelect.appendChild(opt);
        });
    }
});

document.getElementById('patroliForm').addEventListener('submit', function(e) {
    e.preventDefault();
    let form = document.getElementById('patroliForm');
    let formData = new FormData(form);

    fetch(SCRIPT_URL, { method: 'POST', body: formData })
        .then(response => response.text())
        .then(result => {
            alert("Form berhasil dikirim!");
            form.reset();
        })
        .catch(error => {
            alert("Gagal mengirim form!");
            console.error(error);
        });
});
</script>

</body>
</html>
